

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="集合体系结构 单列集合Collection：每个元素只包含一个值，是接口，支持泛型Collection&lt;E&gt; List集合：添加的元素是有序的（存和取 集合中的元素的顺序是相同的）、可重复、有索引 ArrayList：有序，重复，有索引 LinkedList：有序，重复，有索引   Set集合：添加的元素是无序的（存和取 集合中的元素的顺序是不同的）、不重复、无索引 HashSet：无">
<meta property="og:type" content="article">
<meta property="og:title" content="Java集合进阶与Stream">
<meta property="og:url" content="https://github.com/Alder-djr/Alder-djr.github.io.git/2025/05/20/Java%20basis/java28/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="集合体系结构 单列集合Collection：每个元素只包含一个值，是接口，支持泛型Collection&lt;E&gt; List集合：添加的元素是有序的（存和取 集合中的元素的顺序是相同的）、可重复、有索引 ArrayList：有序，重复，有索引 LinkedList：有序，重复，有索引   Set集合：添加的元素是无序的（存和取 集合中的元素的顺序是不同的）、不重复、无索引 HashSet：无">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/image/a40.png">
<meta property="og:image" content="https://github.com/image/a41.png">
<meta property="og:image" content="https://github.com/image/a42.png">
<meta property="og:image" content="https://github.com/image/a43.png">
<meta property="og:image" content="https://github.com/image/a44.png">
<meta property="og:image" content="https://github.com/image/a45.png">
<meta property="og:image" content="https://github.com/image/a46.png">
<meta property="og:image" content="https://github.com/image/a47.png">
<meta property="og:image" content="https://github.com/image/a49.png">
<meta property="og:image" content="https://github.com/image/a50.png">
<meta property="og:image" content="https://github.com/image/a51.png">
<meta property="og:image" content="https://github.com/image/a52.png">
<meta property="og:image" content="https://github.com/image/a53.png">
<meta property="og:image" content="https://github.com/image/a54.png">
<meta property="og:image" content="https://github.com/image/a55.png">
<meta property="og:image" content="https://github.com/image/a56.png">
<meta property="og:image" content="https://github.com/image/a57.png">
<meta property="og:image" content="https://github.com/image/q56.png">
<meta property="og:image" content="https://github.com/image/a58.png">
<meta property="og:image" content="https://github.com/image/a59.png">
<meta property="og:image" content="https://github.com/image/a60.png">
<meta property="og:image" content="https://github.com/image/a61.png">
<meta property="og:image" content="https://github.com/image/a62.png">
<meta property="og:image" content="https://github.com/image/a63.png">
<meta property="og:image" content="https://github.com/image/a64.png">
<meta property="og:image" content="https://github.com/image/a65.png">
<meta property="og:image" content="https://github.com/image/a67.png">
<meta property="og:image" content="https://github.com/image/a66.png">
<meta property="og:image" content="https://github.com/image/a68.png">
<meta property="og:image" content="https://github.com/image/a69.png">
<meta property="og:image" content="https://github.com/image/a70.png">
<meta property="og:image" content="https://github.com/image/a71.png">
<meta property="og:image" content="https://github.com/image/a72.png">
<meta property="og:image" content="https://github.com/image/a73.png">
<meta property="og:image" content="https://github.com/image/a74.png">
<meta property="og:image" content="https://github.com/image/a75.png">
<meta property="og:image" content="https://github.com/image/a76.png">
<meta property="og:image" content="https://github.com/image/a77.png">
<meta property="og:image" content="https://github.com/image/a78.png">
<meta property="og:image" content="https://github.com/image/a79.png">
<meta property="og:image" content="https://github.com/image/a80.png">
<meta property="og:image" content="https://github.com/image/a81.png">
<meta property="og:image" content="https://github.com/image/a82.png">
<meta property="og:image" content="https://github.com/image/a83.png">
<meta property="og:image" content="https://github.com/image/a84.png">
<meta property="og:image" content="https://github.com/image/a85.png">
<meta property="og:image" content="https://github.com/image/a86.png">
<meta property="article:published_time" content="2025-05-19T16:00:00.000Z">
<meta property="article:modified_time" content="2025-05-24T05:13:39.335Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://github.com/image/a40.png">
  
  
  
  <title>Java集合进阶与Stream - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"github.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Alder-dir</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Java集合进阶与Stream"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-05-20 00:00" pubdate>
          May 20, 2025 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          11k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          89 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Java集合进阶与Stream</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="集合体系结构"><a href="#集合体系结构" class="headerlink" title="集合体系结构"></a>集合体系结构</h1><ul>
<li>单列集合Collection：每个元素只包含一个值，是接口，支持泛型<code>Collection&lt;E&gt;</code><ul>
<li>List集合：添加的元素是有序的（存和取 集合中的元素的顺序是相同的）、可重复、有索引<ul>
<li>ArrayList：有序，重复，有索引</li>
<li>LinkedList：有序，重复，有索引</li>
</ul>
</li>
<li>Set集合：添加的元素是无序的（存和取 集合中的元素的顺序是不同的）、不重复、无索引<ul>
<li>HashSet：无序，不重复，无索引</li>
<li>LinkedHashSet：<strong>有序</strong>，不重复，无索引</li>
<li>TreeSet:<strong>按照大小默认升序排序</strong>，不重复，无索引</li>
</ul>
</li>
</ul>
</li>
<li>双列集合Map：每个元素包含两个值（键值对）</li>
</ul>
<p>简单了解：</p>
<p>ArrayList：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> CollectionTest1 &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        ArrayList&lt;<span class="hljs-type">Integer</span>&gt; list = <span class="hljs-built_in">new</span> ArrayList&lt;&gt;();<br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-number">2</span>);<br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-number">3</span>);<br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-number">3</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(list);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(list.<span class="hljs-keyword">get</span>(<span class="hljs-number">1</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a40.png" srcset="/img/loading.gif" lazyload><br>HashSet：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs csharp">package com.ithema.class2;<br><br>import java.util.HashSet;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CollectionTest1</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] <span class="hljs-keyword">args</span></span>)</span> &#123;<br>        HashSet&lt;String&gt; <span class="hljs-keyword">set</span> = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;java1&quot;</span>);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;java2&quot;</span>);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;java1&quot;</span>);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;java2&quot;</span>);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;java4&quot;</span>);<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">set</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a41.png" srcset="/img/loading.gif" lazyload><br>如上图所示，HashSet不可重复，且是无序的，添加元素的顺序与取出的顺序相反，所以也不可以根据索引来取值。</p>
<h1 id="Collection单列集合"><a href="#Collection单列集合" class="headerlink" title="Collection单列集合"></a>Collection单列集合</h1><h2 id="Collection的常用方法"><a href="#Collection的常用方法" class="headerlink" title="Collection的常用方法"></a>Collection的常用方法</h2><p><code>Collection&lt;E&gt;</code>的所有子类集合的方法都继承自它，所以我们直接了解它的方法即可。</p>
<ul>
<li><p><code>public static boolean add()</code>：添加元素</p>
</li>
<li><p><code>public void clear()</code>:清空元素</p>
</li>
<li><p><code>public boolean isEmpty()</code>:判断集合是否为空</p>
</li>
<li><p><code>public int size()</code>:获取集合的长度</p>
</li>
<li><p><code>public boolean contains(Object o)</code>:判断是否包含某元素</p>
</li>
<li><p><code>public boolean remove(Object o)</code>:删掉某元素</p>
</li>
<li><p><code>public Object[] toArray()</code>:将集合转换为数组</p>
<ul>
<li>转成的数组是Object类型的原因是：在泛型中编译时会出现擦除现象，如下图所示：</li>
</ul>
<p><img src="/image/a42.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p><code>public boolean addAll(Collection&lt;? extends E&gt; c)</code>:将一个集和的所有数据拷贝到另一个集合中</p>
</li>
</ul>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs abnf">package com.ithema.class2<span class="hljs-comment">;</span><br><br>import java.util.ArrayList<span class="hljs-comment">;</span><br>import java.util.Arrays<span class="hljs-comment">;</span><br>import java.util.Collection<span class="hljs-comment">;</span><br>import java.util.HashSet<span class="hljs-comment">;</span><br><br>public class CollectionTest1 &#123;<br>    public static void main(String[] args) &#123;<br>        Collection&lt;String&gt; c1 <span class="hljs-operator">=</span> new ArrayList&lt;&gt;()<span class="hljs-comment">;</span><br><br>        c1.add(<span class="hljs-string">&quot;A&quot;</span>)<span class="hljs-comment">;</span><br>        c1.add(<span class="hljs-string">&quot;B&quot;</span>)<span class="hljs-comment">;</span><br>        c1.add(<span class="hljs-string">&quot;C&quot;</span>)<span class="hljs-comment">;</span><br>        c1.add(<span class="hljs-string">&quot;C&quot;</span>)<span class="hljs-comment">;</span><br>        c1.add(<span class="hljs-string">&quot;D&quot;</span>)<span class="hljs-comment">;</span><br>        System.out.println(c1)<span class="hljs-comment">;</span><br><br>        System.out.println(c1.isEmpty())<span class="hljs-comment">;</span><br><br>        System.out.println(c1.size())<span class="hljs-comment">;</span><br><br>        System.out.println(c1.contains(<span class="hljs-string">&quot;A&quot;</span>))<span class="hljs-comment">;</span><br><br>        System.out.println(c1.remove(<span class="hljs-string">&quot;B&quot;</span>))<span class="hljs-comment">;</span><br>        System.out.println(c1)<span class="hljs-comment">;</span><br><br>        Object[] arr <span class="hljs-operator">=</span> c1.toArray()<span class="hljs-comment">;</span><br>        System.out.println(Arrays.toString(arr))<span class="hljs-comment">;</span><br><br>        c1.clear()<span class="hljs-comment">;</span><br>        System.out.println(c1)<span class="hljs-comment">;</span><br><br>        System.out.println(<span class="hljs-string">&quot;===========================&quot;</span>)<span class="hljs-comment">;</span><br>        Collection&lt;String&gt; c2 <span class="hljs-operator">=</span> new ArrayList&lt;&gt;()<span class="hljs-comment">;</span><br>        c2.add(<span class="hljs-string">&quot;Java1&quot;</span>)<span class="hljs-comment">;</span><br>        c2.add(<span class="hljs-string">&quot;Java2&quot;</span>)<span class="hljs-comment">;</span><br>        Collection&lt;String&gt; c3 <span class="hljs-operator">=</span> new ArrayList&lt;&gt;()<span class="hljs-comment">;</span><br>        c3.add(<span class="hljs-string">&quot;Java3&quot;</span>)<span class="hljs-comment">;</span><br>        c3.add(<span class="hljs-string">&quot;Java4&quot;</span>)<span class="hljs-comment">;</span><br>        c2.addAll(c3)<span class="hljs-comment">;</span><br>        System.out.println(c2)<span class="hljs-comment">;</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a43.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="Collection的遍历方式"><a href="#Collection的遍历方式" class="headerlink" title="Collection的遍历方式"></a>Collection的遍历方式</h2><p>Collection的子类的遍历方法也都继承自它</p>
<h3 id="迭代器Iterator"><a href="#迭代器Iterator" class="headerlink" title="迭代器Iterator"></a>迭代器Iterator</h3><p>迭代器是用来遍历集合的专用方法（数组没有迭代器）</p>
<ul>
<li>Collection集合获取迭代器的方法：<code>Iterator&lt;E&gt; iterator()</code>，返回集合的迭代器对象，该迭代器对象默认指向当前集合的第一个元素</li>
<li>Iterator迭代器中的常用方法：<ul>
<li><code>bollean hasNext()</code>:询问当前位置是否有元素存在</li>
<li><code>E next()</code>:获取当前元素，并同时将迭代器对象指向下一个元素</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionTest2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Collection&lt;String&gt; c1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        c1.add(<span class="hljs-string">&quot;Java1&quot;</span>);<br>        c1.add(<span class="hljs-string">&quot;Java2&quot;</span>);<br>        c1.add(<span class="hljs-string">&quot;Java3&quot;</span>);<br>        c1.add(<span class="hljs-string">&quot;Java4&quot;</span>);<br>        System.out.println(c1);<br><br>        <span class="hljs-comment">//遍历集合</span><br>        <span class="hljs-comment">//从集合对象中获取迭代对象</span><br>        Iterator&lt;String&gt; i1 = c1.iterator();<br>        <span class="hljs-keyword">while</span> (i1.hasNext()) &#123;<span class="hljs-comment">//问一次</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> i1.next();<span class="hljs-comment">//取一次</span><br>            System.out.println(s);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a44.png" srcset="/img/loading.gif" lazyload><br><strong>注意：遍历元素时，一定要使用hasNext问一次，二则会出现bug,如下图所示：</strong></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">while</span> (i1.hasNext()) &#123;<span class="hljs-comment">//问一次</span><br><span class="hljs-comment">//取三次</span><br>    System.out.<span class="hljs-keyword">println</span>(i1.<span class="hljs-keyword">next</span>());<br>    System.out.<span class="hljs-keyword">println</span>(i1.<span class="hljs-keyword">next</span>());<br>    System.out.<span class="hljs-keyword">println</span>(i1.<span class="hljs-keyword">next</span>());<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a45.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="增强for循环"><a href="#增强for循环" class="headerlink" title="增强for循环"></a>增强for循环</h3><p><code>for(元素的数据类型 变量名：数组或集合)&#123;&#125;</code></p>
<ul>
<li>增强for循环既可以用来遍历数组，也可以用来遍历集合</li>
<li>增强for循环遍历集合本质是迭代器遍历集合的简化写法</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> CollectionTest2 &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        Collection&lt;String&gt; c1 = <span class="hljs-built_in">new</span> ArrayList&lt;&gt;();<br>        c1.<span class="hljs-keyword">add</span>(&quot;Java1&quot;);<br>        c1.<span class="hljs-keyword">add</span>(&quot;Java2&quot;);<br>        c1.<span class="hljs-keyword">add</span>(&quot;Java3&quot;);<br>        c1.<span class="hljs-keyword">add</span>(&quot;Java4&quot;);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(c1);<br>        <br>        <span class="hljs-keyword">for</span>(String s : c1) &#123;<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(s);<br>        &#125;<br><br>        String[] <span class="hljs-keyword">array</span> = &#123;&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;&#125;;<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(Arrays.toString(<span class="hljs-keyword">array</span>));<br>        <span class="hljs-keyword">for</span> (String s : <span class="hljs-keyword">array</span>) &#123;<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(s);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a46.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h3><p><code>default void forEach(Consumer&lt;? super T&gt; action)</code>:结合Lambda表达式遍历集合</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><br>package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">function</span>.Consumer;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> CollectionTest2 &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        Collection&lt;String&gt; c1 = <span class="hljs-built_in">new</span> ArrayList&lt;&gt;();<br>        c1.<span class="hljs-keyword">add</span>(&quot;Java1&quot;);<br>        c1.<span class="hljs-keyword">add</span>(&quot;Java2&quot;);<br>        c1.<span class="hljs-keyword">add</span>(&quot;Java3&quot;);<br>        c1.<span class="hljs-keyword">add</span>(&quot;Java4&quot;);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(c1);<br>        <br>        c1.<span class="hljs-keyword">forEach</span>(<span class="hljs-built_in">new</span> Consumer&lt;String&gt;() &#123;<br>            @Override<br>            <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(String s) &#123;<br>                <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(s);<br>            &#125;<br>        &#125;);<br><br>        //简化一<br>        c1.<span class="hljs-keyword">forEach</span>((String s)-&gt;&#123;<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(s);<br>        &#125;);<br><br>        //简化二<br>        c1.<span class="hljs-keyword">forEach</span>(s-&gt; <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(s));<br><br>        //最终简化结果<br>        c1.<span class="hljs-keyword">forEach</span>(<span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="案例：遍历集合中的自定义对象"><a href="#案例：遍历集合中的自定义对象" class="headerlink" title="案例：遍历集合中的自定义对象"></a>案例：遍历集合中的自定义对象</h2><p>需求：展示多部电影的信息</p>
<p>Movie.java:</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs arduino">package com.ithema.class2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Movie</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> actor;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> score;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Movie</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Movie</span><span class="hljs-params">(<span class="hljs-type">String</span> name, <span class="hljs-type">String</span> actor, <span class="hljs-type">double</span> score)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>        <span class="hljs-keyword">this</span>.actor = actor;<br>        <span class="hljs-keyword">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getActor</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> actor;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setActor</span><span class="hljs-params">(<span class="hljs-type">String</span> actor)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.actor = actor;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title">getScore</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> score;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setScore</span><span class="hljs-params">(<span class="hljs-type">double</span> score)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.score = score;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>CollectionTest3.java:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collection;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> CollectionTest3 &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        //<span class="hljs-number">1.</span>创建一个集合容器负责存储多部电影对象<br>        Collection&lt;Movie&gt; movies = <span class="hljs-built_in">new</span> ArrayList&lt;&gt;();<br>        movies.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Movie(&quot;《肖申克的救赎》&quot;, &quot;Harry Potter&quot;, <span class="hljs-number">9.9</span>));<br>        movies.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Movie(&quot;霸王别姬&quot;, &quot;Harry Potter&quot;, <span class="hljs-number">9.9</span>));<br><br>        <span class="hljs-keyword">for</span> (Movie movie : movies) &#123;<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;电影名称：&quot;+movie.getName());<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;电影主角：&quot;+movie.getActor());<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;电影得分&quot;+movie.getScore());<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;==============&quot;);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a47.png" srcset="/img/loading.gif" lazyload><br><strong>注意：集合中存入的是元素对象的地址，对象拿到地址通过get方法获取具体数据</strong></p>
<h2 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h2><h3 id="List的常用方法"><a href="#List的常用方法" class="headerlink" title="List的常用方法"></a>List的常用方法</h3><p>List系列的集合有以下特点：有序，重复，有索引，因为支持索引，所以多了很多与索引相关的方法，Collection的功能List也同样继承了。</p>
<ul>
<li><code>public void add()</code>：添加元素</li>
<li><code>public void add(int index,E element)</code>:在某索引index处添加元素E</li>
<li><code>public E remove(int index)</code>:删除索引index处的元素，并返回该元素</li>
<li><code>public E get(int index)</code>:返回集合中指定位置的元素</li>
<li><code>public E set(int index,E element)</code>:修改索引位置处的元素，修改成功后返回原来的数据</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs csharp">package com.ithema.class2;<br><br>import java.util.ArrayList;<br>import java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ListTest1</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] <span class="hljs-keyword">args</span></span>)</span> &#123;<br>        <span class="hljs-comment">//创建一个ArrayList集合对象</span><br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<span class="hljs-comment">//经典：多态写法</span><br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;A&quot;</span>);<br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;B&quot;</span>);<br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;C&quot;</span>);<br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-string">&quot;C&quot;</span>);<br>        System.<span class="hljs-keyword">out</span>.println(list);<br><br>        <span class="hljs-comment">//在某个索引位置插入元素</span><br>        list.<span class="hljs-keyword">add</span>(<span class="hljs-number">2</span>,<span class="hljs-string">&quot;D&quot;</span>);<br>        System.<span class="hljs-keyword">out</span>.println(list);<br><br>        <span class="hljs-comment">//根据索引删除元素，返回被删除元素</span><br>        System.<span class="hljs-keyword">out</span>.println(list.<span class="hljs-keyword">remove</span>(<span class="hljs-number">2</span>));<br>        System.<span class="hljs-keyword">out</span>.println(list);<br><br>        <span class="hljs-comment">//返回集合中指定位置的元素</span><br>        System.<span class="hljs-keyword">out</span>.println(list.<span class="hljs-keyword">get</span>(<span class="hljs-number">3</span>));<br><br>        <span class="hljs-comment">//修改索引位置处的元素，修改成功后返回原来的数据</span><br>        list.<span class="hljs-keyword">set</span>(<span class="hljs-number">3</span>,<span class="hljs-string">&quot;E&quot;</span>);<br>        System.<span class="hljs-keyword">out</span>.println(list);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="List的遍历方式"><a href="#List的遍历方式" class="headerlink" title="List的遍历方式"></a>List的遍历方式</h3><ul>
<li>for循环遍历</li>
<li>迭代器</li>
<li>增强for循环</li>
<li>lambda表达式</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> ListTest2 &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        //创建一个ArrayList集合对象<br>        List&lt;String&gt; list = <span class="hljs-built_in">new</span> ArrayList&lt;&gt;();//经典：多态写法<br>        list.<span class="hljs-keyword">add</span>(&quot;A&quot;);<br>        list.<span class="hljs-keyword">add</span>(&quot;B&quot;);<br>        list.<span class="hljs-keyword">add</span>(&quot;C&quot;);<br>        list.<span class="hljs-keyword">add</span>(&quot;C&quot;);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(list);<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;===for循环遍历===&quot;);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; list.size(); i++) &#123;<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(list.<span class="hljs-keyword">get</span>(i));<br>        &#125;<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;===迭代器遍历===&quot;);<br>        Iterator&lt;String&gt; it = list.iterator();<br>        <span class="hljs-keyword">while</span> (it.hasNext()) &#123;<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(it.next());<br>        &#125;<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;===增强for循环===&quot;);<br>        <span class="hljs-keyword">for</span> (String s : list) &#123;<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(s);<br>        &#125;<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;===lambda表达式遍历===&quot;);<br>        list.<span class="hljs-keyword">forEach</span>(<span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a49.png" srcset="/img/loading.gif" lazyload></p>
<p>List系列集合底层采用的数据结构不同，应用场景也不同</p>
<h3 id="ArrayList集合的底层原理"><a href="#ArrayList集合的底层原理" class="headerlink" title="ArrayList集合的底层原理"></a>ArrayList集合的底层原理</h3><ul>
<li>基于数组实现<ul>
<li>数组根据索引查询数据快</li>
<li>数组删除效率低,因为需要将后面的数据往前移</li>
<li>数组添加效率低，因为需要把后面很多的数据后移，再添加元素；或者也可能需要进行数组的扩容</li>
</ul>
</li>
<li>①利用无参构造器创建的集合，会在底层创建一个默认长度为0的数组</li>
<li>②添加第一个数组时，底层会创建一个新的长度为10的数组</li>
<li>③存满时，会扩容1.5倍，也就是扩容到15</li>
<li>④如果一次添加多个元素，1.5倍还放不下，则新创建数组的长度以实际为准。长度10存满后，又一次性添加11个数据，这时就会创建一个长度为21的数组</li>
</ul>
<p><strong>所以ArrayList集合也存在查询快，增删慢的特点。</strong></p>
<h3 id="ArrayList集合适合的应用场景"><a href="#ArrayList集合适合的应用场景" class="headerlink" title="ArrayList集合适合的应用场景"></a>ArrayList集合适合的应用场景</h3><ul>
<li>ArrayList集合适合：根据随机索引查询数据，或者数据量不是很大时</li>
<li>ArrayList集合不适合：数据量大的同时，又要频繁进行增删操作</li>
</ul>
<h3 id="LinkedList集合的底层原理"><a href="#LinkedList集合的底层原理" class="headerlink" title="LinkedList集合的底层原理"></a>LinkedList集合的底层原理</h3><ul>
<li>基于双链表实现<ul>
<li>链表的结点是独立的对象，在内存中是不连续的，每个结点包含数据值和下一个结点的地址</li>
<li>链表查询慢，无论查询哪个数据都要从头开始找</li>
<li>链表增删相对快，只需改变结点地址的指向，不存在扩容情况</li>
</ul>
</li>
</ul>
<p><strong>注意：单链表只能从前往后读取数据，而双链表还可以从后往前读取，所以双链表相对于单链表查询更快些，且双链表有头结点地址和尾结点地址，对首尾结点的增删改查的速度是极快的</strong></p>
<h3 id="LinkedList集合的新增方法"><a href="#LinkedList集合的新增方法" class="headerlink" title="LinkedList集合的新增方法"></a>LinkedList集合的新增方法</h3><ul>
<li><code>public void addFirst(E e)</code>在该列表开头插入指定的元素</li>
<li><code>public void addLast(E e)</code>在指定的元素追加到此列表的末尾</li>
<li><code>public E getFirst()</code>返回列表中的第一个元素</li>
<li><code>public E getLast()</code>返回列表中的最后一个元素</li>
<li><code>public E removeFirst()</code>从此列表中删除第一个元素</li>
<li><code>public E removeLast()</code>从此列表中删除最后一个元素</li>
</ul>
<h3 id="LinkedList集合适合的应用场景"><a href="#LinkedList集合适合的应用场景" class="headerlink" title="LinkedList集合适合的应用场景"></a>LinkedList集合适合的应用场景</h3><ul>
<li>设计队列，队列瓶头和瓶尾都不封闭<br>因为双链表对首尾结点的增删改查的速度是极快的，用来设计队列是非常合适的，队列的特点是先进先出，通常用在生活中的叫号系统。</li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs arduino">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListTest</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br>        <span class="hljs-comment">//创建队列</span><br>        LinkedList&lt;<span class="hljs-type">String</span>&gt; queue = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br>        <span class="hljs-comment">//入队：入队入到队列尾部</span><br>        queue.<span class="hljs-built_in">addLast</span>(<span class="hljs-string">&quot;a&quot;</span>);<br>        queue.<span class="hljs-built_in">addLast</span>(<span class="hljs-string">&quot;b&quot;</span>);<br>        queue.<span class="hljs-built_in">addLast</span>(<span class="hljs-string">&quot;c&quot;</span>);<br>        queue.<span class="hljs-built_in">addLast</span>(<span class="hljs-string">&quot;d&quot;</span>);<br><br>        System.out.<span class="hljs-built_in">println</span>(queue);<br>        <br>        <span class="hljs-comment">//出队：先进的先出去</span><br>        System.out.<span class="hljs-built_in">println</span>(queue.<span class="hljs-built_in">removeFirst</span>());<br>        System.out.<span class="hljs-built_in">println</span>(queue.<span class="hljs-built_in">removeFirst</span>());<br>        System.out.<span class="hljs-built_in">println</span>(queue);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a50.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>设计栈，栈瓶头不封闭，瓶尾封闭<br>栈的特点：后进先出，先进后出。最先进去的数据称为栈底元素，最后进去的称为栈顶元素。数据进入栈模型的过程称为：压&#x2F;进栈（push）；数据离开栈的过程称为：弹&#x2F;出栈（pop）。例如手枪的弹夹就可以使用栈实现。<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">package</span> com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> LinkedListTest2 &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(String[] args) &#123;<br>        <span class="hljs-comment">//创建栈</span><br>        LinkedList&lt;String&gt; stack = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;();<br>        <span class="hljs-comment">//入栈：入栈入到栈尾部</span><br><span class="hljs-comment">//        stack.addFirst(&quot;1子弹&quot;);</span><br><span class="hljs-comment">//        stack.addFirst(&quot;2子弹&quot;);</span><br><span class="hljs-comment">//        stack.addFirst(&quot;3子弹&quot;);</span><br><span class="hljs-comment">//        stack.addFirst(&quot;4子弹&quot;);</span><br>        stack.<span class="hljs-keyword">push</span>(<span class="hljs-string">&quot;1子弹&quot;</span>);<br>        stack.<span class="hljs-keyword">push</span>(<span class="hljs-string">&quot;2子弹&quot;</span>);<br>        stack.<span class="hljs-keyword">push</span>(<span class="hljs-string">&quot;3子弹&quot;</span>);<br>        stack.<span class="hljs-keyword">push</span>(<span class="hljs-string">&quot;4子弹&quot;</span>);<br>        System.out.<span class="hljs-keyword">println</span>(stack);<br><br>        <span class="hljs-comment">//出栈：后进先出</span><br><span class="hljs-comment">//        System.out.println(stack.removeFirst());</span><br><span class="hljs-comment">//        System.out.println(stack.removeFirst());</span><br>        System.out.<span class="hljs-keyword">println</span>(stack.<span class="hljs-keyword">pop</span>());<br>        System.out.<span class="hljs-keyword">println</span>(stack.<span class="hljs-keyword">pop</span>());<br>        System.out.<span class="hljs-keyword">println</span>(stack);<br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<img src="/image/a51.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<h2 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h2><p>Set集合：添加的元素是无序的（存和取 集合中的元素的顺序是不同的）、不重复、无索引</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.HashSet;<br><span class="hljs-keyword">import</span> java.util.LinkedHashSet;<br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">Set</span>;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> SetTest1 &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br><br>        //创建<span class="hljs-keyword">Set</span>集合<br>        <span class="hljs-keyword">Set</span>&lt;<span class="hljs-type">Integer</span>&gt; set1 = <span class="hljs-built_in">new</span> HashSet&lt;&gt;();//创建一个HashSet的集合对象，经典代码,无序，不重复，无索引<br>        set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>        set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>        set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">2</span>);<br>        set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">32</span>);<br>        set1.<span class="hljs-keyword">add</span>(<span class="hljs-number">49</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(set1);//只无序一次<br><br>        <span class="hljs-keyword">Set</span>&lt;<span class="hljs-type">Integer</span>&gt; set2 = <span class="hljs-built_in">new</span> LinkedHashSet&lt;&gt;();//有序，不重复，无索引<br>        set2.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>        set2.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>        set2.<span class="hljs-keyword">add</span>(<span class="hljs-number">2</span>);<br>        set2.<span class="hljs-keyword">add</span>(<span class="hljs-number">32</span>);<br>        set2.<span class="hljs-keyword">add</span>(<span class="hljs-number">49</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(set2);<br><br>        <span class="hljs-keyword">Set</span>&lt;<span class="hljs-type">Integer</span>&gt; set3 = <span class="hljs-built_in">new</span> TreeSet&lt;&gt;();//默认从小到大排序，不重复，无索引<br>        set3.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>        set3.<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>);<br>        set3.<span class="hljs-keyword">add</span>(<span class="hljs-number">2</span>);<br>        set3.<span class="hljs-keyword">add</span>(<span class="hljs-number">32</span>);<br>        set3.<span class="hljs-keyword">add</span>(<span class="hljs-number">49</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(set3);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a52.png" srcset="/img/loading.gif" lazyload><br>Set集合的常用方法基本上就是Collection常用方法，无新增。</p>
<p><strong>哈希值</strong></br></p>
<ul>
<li>哈希值就是一个int类型的数值，Java中每个对象都有一个哈希值</li>
<li>Java中所有对象都可以调用Object类提供的hashCode方法，返回该对象自己的哈希值。<code>public int hashCode()</code></li>
<li>同一个对象多次调用hashCode方法返回的哈希值是相同的</li>
<li>不同对象，它们的哈希值一般不相同但也可能会相同（哈希碰撞），因为int型是有范围的，但这种情况是极少数的</li>
</ul>
<p>Student.java:</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs arduino">package com.ithema.class2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Student</span><span class="hljs-params">()</span> </span>&#123;&#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Student</span><span class="hljs-params">(<span class="hljs-type">String</span> name, <span class="hljs-type">int</span> age)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.age = age;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>SetTest2.java:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp">package com.ithema.class2;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SetTest2</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] <span class="hljs-keyword">args</span></span>)</span> &#123;<br>        Student s1 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-number">12</span>);<br>        Student s2 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-number">19</span>);<br>        System.<span class="hljs-keyword">out</span>.println(s1.hashCode());<br>        System.<span class="hljs-keyword">out</span>.println(s1.hashCode());<br>        System.<span class="hljs-keyword">out</span>.println(s2.hashCode());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a53.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="HashSet集合的底层原理"><a href="#HashSet集合的底层原理" class="headerlink" title="HashSet集合的底层原理"></a>HashSet集合的底层原理</h3><ul>
<li>基于哈希表实现</li>
<li>哈希表是一种增删改查数据性能都比较好的数据结构</li>
</ul>
<h4 id="JDK8之前HashSet集合的底层原理基于哈希表：数组-链表"><a href="#JDK8之前HashSet集合的底层原理基于哈希表：数组-链表" class="headerlink" title="JDK8之前HashSet集合的底层原理基于哈希表：数组+链表"></a>JDK8之前HashSet集合的底层原理基于哈希表：<strong>数组+链表</strong></h4><ul>
<li>底层 创建一个默认长度16，默认加载因子0.75的数组，数组名table。<br><img src="/image/a54.png" srcset="/img/loading.gif" lazyload></li>
<li>使用元素的哈希值对数组长度求余计算出应存入的位置。</li>
<li>判断要插入的位置是否为null，为null则直接存入</li>
<li>若不为null，则调用equals方法比较 内部的属性值，如果一样，则不存，不一样则将新元素存入数组，将老元素挂在新元素下面形成链表结构。<br><img src="/image/a55.png" srcset="/img/loading.gif" lazyload></li>
<li>扩容：当数组里面存了16*0.75 &#x3D;12个元素的时候，数组就会扩容为原先的两倍</li>
</ul>
<h4 id="JDK8之后HashSet集合的底层原理基于哈希表：数组-链表-红黑树"><a href="#JDK8之后HashSet集合的底层原理基于哈希表：数组-链表-红黑树" class="headerlink" title="JDK8之后HashSet集合的底层原理基于哈希表：数组+链表+红黑树"></a>JDK8之后HashSet集合的底层原理基于哈希表：<strong>数组+链表+红黑树</strong></h4><ul>
<li>当链表长度&gt;8时，且数组长度&gt;&#x3D;64时，自动将链表转成红黑树。这样的好处就是比较次数减少，小的往左边比较，大的往右边比较。进一步提高操作数据的性能。<br><img src="/image/a56.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<h4 id="补充：数据结构"><a href="#补充：数据结构" class="headerlink" title="补充：数据结构"></a>补充：数据结构</h4><p><strong>普通二叉树</strong></p>
<ul>
<li><p>二叉树的任意节点的度&lt;&#x3D;2；度指的是每一个节点的子节点数量；</p>
</li>
<li><p>树高指树的总层数</p>
</li>
<li><p>跟节点：最顶层的结点</p>
</li>
<li><p>二叉树的每个节点都由四部分组成，父节点地址，值，左子节点地址，右子节点地址<br><img src="/image/a57.png" srcset="/img/loading.gif" lazyload><br><strong>二叉查找树（二叉排序树）</strong></p>
</li>
<li><p>规则:小的存左边，大的存右边，一样的不存<br>但是会出现问题，如下图所示：这就相当于链式结构，查询效率降低<br><img src="/image/q56.png" srcset="/img/loading.gif" lazyload><br>所以就有了平衡二叉树的出现<br><img src="/image/a58.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p>红黑树<br>红黑树是可以自平衡的二叉树，是一种增删改查数据性能相对都较好的结构。<br><img src="/image/a59.png" srcset="/img/loading.gif" lazyload></p>
</li>
</ul>
<h4 id="HashSet集合去除重复对象"><a href="#HashSet集合去除重复对象" class="headerlink" title="HashSet集合去除重复对象"></a>HashSet集合去除重复对象</h4><p>当内容相同的对象添加到HashSet集合中，它是不会去掉重复的对象的<br><img src="/image/a60.png" srcset="/img/loading.gif" lazyload><br>这是因为不同的对象哈希值不同，算出来的位置有不同，要想实现只保留一个重复的对象，需要做一些处理：是它们哈希值相同，且内容相同。这就需要重写equals方法和hashCode方法，如下：</p>
<p>Student.java:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package com.<span class="hljs-property">ithema</span>.<span class="hljs-property">class2</span>;<br><br><span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Objects</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br>    <span class="hljs-keyword">private</span> int age;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Student</span>() &#123;&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_">String</span> name, int age) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-title class_">String</span> name</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getAge</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAge</span>(<span class="hljs-params">int age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//只有两个对象内容一样就返回true</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">equals</span>(<span class="hljs-params"><span class="hljs-title class_">Object</span> o</span>) &#123;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || <span class="hljs-title function_">getClass</span>() != o.<span class="hljs-title function_">getClass</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-title class_">Student</span> student = (<span class="hljs-title class_">Student</span>) o;<br>        <span class="hljs-keyword">return</span> age == student.<span class="hljs-property">age</span> &amp;&amp; <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">equals</span>(name, student.<span class="hljs-property">name</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//只有两个对象内容一样返回的哈希值就一样</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">hashCode</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">hash</span>(name, age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>HashSetTes.java:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.HashSet;<br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">Set</span>;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> HashSetTest &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        <span class="hljs-keyword">Set</span>&lt;Student&gt; <span class="hljs-keyword">set</span> = <span class="hljs-built_in">new</span> HashSet&lt;&gt;();<br>        Student s1 = <span class="hljs-built_in">new</span> Student(&quot;张三&quot;,<span class="hljs-number">12</span>);<br>        Student s2 = <span class="hljs-built_in">new</span> Student(&quot;李四&quot;,<span class="hljs-number">19</span>);<br>        Student s3 = <span class="hljs-built_in">new</span> Student(&quot;张三&quot;,<span class="hljs-number">12</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(s1.hashCode());<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(s3.hashCode());<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(s1);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(s2);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(s3);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">set</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a61.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="LinkedHashSet集合的底层原理"><a href="#LinkedHashSet集合的底层原理" class="headerlink" title="LinkedHashSet集合的底层原理"></a>LinkedHashSet集合的底层原理</h3><ul>
<li>基于哈希表（数组、链表、红黑树）实现</li>
<li>它的每个元素都额外多一个双链表的机制记录它前后元素的位置<br><img src="/image/a62.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<p><strong>LinkedHashSet集合内记录的很多多西，所以它是用增加内存的方式来实现有序的特点的。</strong></p>
<h3 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h3><ul>
<li>不重复、无索引、可排序（默认升序排序）</li>
<li>底层基于红黑树实现的排序:将第一个存入的数据作为树的根节点，剩下的数据依次于根节点比较放置在左子节点或右子节点</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">Set</span>;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> TreeSetTest &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        <span class="hljs-keyword">Set</span>&lt;<span class="hljs-type">Integer</span>&gt; <span class="hljs-keyword">set</span> = <span class="hljs-built_in">new</span> TreeSet&lt;&gt;();<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-number">10</span>);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-number">50</span>);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-number">50</span>);<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-number">7</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">set</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a63.png" srcset="/img/loading.gif" lazyload><br><strong>注意：对于数值类型：Integer、Double，默认按照数值本身的大小进行升序排序； 对于字符串类型，默认按照首字母的编号升序排序； 对于自定义的类型如Student对象，TreeSet默认无法直接排序,如下图所示</strong><br><img src="/image/a64.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>解决方法一：让自定义的类实现ComparaTo方法，重写里面的compareTo方法来指定比较规则。<br>Student.java:</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package com.<span class="hljs-property">ithema</span>.<span class="hljs-property">class2</span>;<br><br><span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Objects</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;<span class="hljs-title class_">Student</span>&gt; &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br>    <span class="hljs-keyword">private</span> int age;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">compareTo</span>(<span class="hljs-params"><span class="hljs-title class_">Student</span> o</span>) &#123;<span class="hljs-comment">//升序排序</span><br>        <span class="hljs-comment">//this   o </span><br>        <span class="hljs-comment">// 前面大于后面返回正整数</span><br>        <span class="hljs-comment">// 前面小于后面返回负整数</span><br>        <span class="hljs-comment">// 前面等于后面返回0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> - o.<span class="hljs-property">age</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Student</span>() &#123;&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_">String</span> name, int age) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-title class_">String</span> name</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getAge</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAge</span>(<span class="hljs-params">int age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>TreeSetTest.java:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">Set</span>;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> TreeSetTest &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        <span class="hljs-keyword">Set</span>&lt;Student&gt; <span class="hljs-keyword">set</span> = <span class="hljs-built_in">new</span> TreeSet&lt;&gt;();<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Student(&quot;sss&quot;,<span class="hljs-number">12</span>));<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Student(&quot;ssss&quot;,<span class="hljs-number">13</span>));<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Student(&quot;qqqq&quot;,<span class="hljs-number">79</span>));<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Student(&quot;pppp&quot;,<span class="hljs-number">79</span>));<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">set</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a65.png" srcset="/img/loading.gif" lazyload><br><strong>看到结果发现最后一个对象被舍去了，因为它和第三个的age相同，TreeSet就将其舍掉了</strong></p>
<ul>
<li>解决方法二：通过调用TreeSet集合有参构造器<code>public TreeSet(Comparaor&lt;? super E&gt; comparator)</code>，可以设置Comparator对象（比较器对象，用于指定比较规则。）<br>Student.java不变，也可以不实现ComparaTo方法。<br>TreeSetTest.java:</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class2;<br><br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">Set</span>;<br><span class="hljs-keyword">import</span> java.util.TreeSet;<br><br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> TreeSetTest &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br><br><br>        <span class="hljs-keyword">Set</span>&lt;Student&gt; <span class="hljs-keyword">set</span> = <span class="hljs-built_in">new</span> TreeSet&lt;&gt;(<span class="hljs-built_in">new</span> Comparator&lt;Student&gt;() &#123;<br>            @Override<br>            <span class="hljs-built_in">public</span> <span class="hljs-type">int</span> compare(Student o1, Student o2) &#123;<br>                <span class="hljs-keyword">return</span> o1.getAge() - o2.getAge();<br>            &#125;<br>        &#125;);<br><br><br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Student(&quot;sss&quot;,<span class="hljs-number">12</span>));<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Student(&quot;ssss&quot;,<span class="hljs-number">13</span>));<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Student(&quot;qqqq&quot;,<span class="hljs-number">79</span>));<br>        <span class="hljs-keyword">set</span>.<span class="hljs-keyword">add</span>(<span class="hljs-built_in">new</span> Student(&quot;pppp&quot;,<span class="hljs-number">79</span>));<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">set</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>注意：如果Student类实现了ComparaTo方法，同时测试类也调用TreeSet集合有参构造器，若两者的比较体不同，则会就近按照测试类中TreeSet集合的参构造器中的比较体来比较。</strong></p>
<h2 id="集合的并发修改异常"><a href="#集合的并发修改异常" class="headerlink" title="集合的并发修改异常"></a>集合的并发修改异常</h2><p>使用迭代器遍历集合时，同时又在删除集合中的数据，程序就会出现并发修改异常的错误</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs abnf">package com.ithema.class2<span class="hljs-comment">;</span><br><br>import java.util.ArrayList<span class="hljs-comment">;</span><br>import java.util.Iterator<span class="hljs-comment">;</span><br>import java.util.List<span class="hljs-comment">;</span><br>import java.util.Scanner<span class="hljs-comment">;</span><br><br>public class Test &#123;<br>    public static void main(String[] args) &#123;<br>        List&lt;String&gt; list <span class="hljs-operator">=</span> new ArrayList&lt;&gt;()<span class="hljs-comment">;</span><br>        list.add(<span class="hljs-string">&quot;李爱华&quot;</span>)<span class="hljs-comment">;</span><br>        list.add(<span class="hljs-string">&quot;李四&quot;</span>)<span class="hljs-comment">;</span><br>        list.add(<span class="hljs-string">&quot;独家&quot;</span>)<span class="hljs-comment">;</span><br>        list.add(<span class="hljs-string">&quot;李三&quot;</span>)<span class="hljs-comment">;</span><br>        list.add(<span class="hljs-string">&quot;下闸&quot;</span>)<span class="hljs-comment">;</span><br>        list.add(<span class="hljs-string">&quot;网易宝&quot;</span>)<span class="hljs-comment">;</span><br>        System.out.println(list)<span class="hljs-comment">;</span><br><br>        //找出集合中全部带李的名字，并删除<br>        //使用迭代器删除<br>        Iterator&lt;String&gt; it <span class="hljs-operator">=</span> list.iterator()<span class="hljs-comment">;</span><br>        while (it.hasNext()) &#123;<br>            String s <span class="hljs-operator">=</span> it.next()<span class="hljs-comment">;</span><br>            if(s.contains(<span class="hljs-string">&quot;李&quot;</span>))&#123;<br>                //list.remove(s)<span class="hljs-comment">;//使用集合自带的删除操作一定会出现并发操作</span><br>                it.remove()<span class="hljs-comment">;//每删除一个数据，在底层执行i--</span><br>            &#125;<br>        &#125;<br>        System.out.println(list)<span class="hljs-comment">;</span><br><br><br>        //使用for循环正着删除，没闪出一个数据需要加上i--<br>        for (int i <span class="hljs-operator">=</span> <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; list.size(); i++) &#123;</span><br>            String s <span class="hljs-operator">=</span> list.get(i)<span class="hljs-comment">;</span><br>            if(s.contains(<span class="hljs-string">&quot;李&quot;</span>))&#123;<br>                list.remove(i)<span class="hljs-comment">;</span><br>                i--<span class="hljs-comment">;</span><br>            &#125;<br>        &#125;<br>        System.out.println(list)<span class="hljs-comment">;</span><br><br><br>        //使用for循倒着删除<br>        for(int i <span class="hljs-operator">=</span> list.size()-<span class="hljs-number">1</span><span class="hljs-comment">; i &gt;= 0; i--)&#123;</span><br>            String s <span class="hljs-operator">=</span> list.get(i)<span class="hljs-comment">;</span><br>            if(s.contains(<span class="hljs-string">&quot;李&quot;</span>))&#123;<br>                list.remove(i)<span class="hljs-comment">;</span><br>            &#125;<br>        &#125;<br>        System.out.println(list)<span class="hljs-comment">;</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a67.png" srcset="/img/loading.gif" lazyload><br>如上述代码所示，删除集合中的数据有三种方法，在使用迭代器删除方法时需要注意不可以使用集合自带的remove方法，因为每删除一个数据，集合的长度就会变短，所以要使用迭代器自带的方法来删除。否则会出现以下错误：<br><img src="/image/a66.png" srcset="/img/loading.gif" lazyload><br><strong>注意：使用lambda和增强for循环的方式不能实现删除集合中某特定元素的操作，因为无法进行i–的操作</strong></p>
<h2 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h2><ul>
<li>可变参数就是一种特殊参数，定义在方法、构造器的形参列表中，格式为<code>数据类型...参数名称</code></li>
<li>特点：可以不传数据给它，可以传一个或者同时传多个数据给它，也可以传一个数据给它</li>
<li>好处：常常用来灵活的接收数据</li>
<li><strong>注意事项：</strong><ul>
<li>可变参数在方法内部就是一个数组</li>
<li>一个形参列表中只有一个可变参数</li>
<li>可变参数必须放在形参列表的最后面</li>
</ul>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs csharp">package com.ithema.class3;<br><br>import java.util.Arrays;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ParamTest</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] <span class="hljs-keyword">args</span></span>)</span> &#123;<br>        test();<span class="hljs-comment">//不添加数据</span><br>        test(<span class="hljs-number">10</span>);<span class="hljs-comment">//添加一个数据</span><br>        test(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>);<span class="hljs-comment">//添加多个数据</span><br>        test(<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>[]&#123;<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>&#125;);<span class="hljs-comment">//添加一个数组</span><br>        test2(<span class="hljs-number">10</span>,<span class="hljs-number">12</span>,<span class="hljs-number">12</span>);<br>    &#125;<br><br><br>    <span class="hljs-comment">//1、一个形参列表中只能有一个可变参数</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>...nums</span>)</span>&#123;<br>        <span class="hljs-comment">//可变参数在方法内部，本质就是一个数组</span><br>        System.<span class="hljs-keyword">out</span>.println(nums.length);<br>        System.<span class="hljs-keyword">out</span>.println(Arrays.toString(nums));<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;============&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//2、可变参数必须放到形参列表的最后面</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> age,<span class="hljs-built_in">int</span>...nums</span>)</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(age);<br>        System.<span class="hljs-keyword">out</span>.println(nums.length);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a68.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h2><p>Collections是一个用来操作集合的工具类</p>
<ul>
<li>为集合批量添加数据<code>public static &lt;T&gt; boolean addAll(Collection&lt;? super T&gt; c, T...elements)</code>。<code>?</code>是数据的类型，<code>? super T</code>表示T是?的子类，<code>elements</code>必须是T类型</li>
<li>打乱List集合中的元素顺序<code>public static void shuffle(List&lt;?&gt; list)</code></li>
<li>对List集合中的元素进行升序排序<code>public static &lt;T&gt; void sort(List&lt;T&gt; list)</code></li>
<li>对List集合中的元素，按照比较器对象指定的规则进行排序<code>public static &lt;T&gt; void sort(List&lt;T&gt; list, Cpmparator&lt;? super T&gt; c)</code></li>
</ul>
<p>Student.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ithema.class3;<br><br><span class="hljs-keyword">import</span> java.util.Objects;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;Student&gt; &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> score;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(Student o)</span> &#123;<span class="hljs-comment">//升序排序</span><br>        <span class="hljs-comment">//this   o</span><br>        <span class="hljs-comment">// 前面大于后面返回正整数</span><br>        <span class="hljs-comment">// 前面小于后面返回负整数</span><br>        <span class="hljs-comment">// 前面等于后面返回0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.age - o.age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getScore</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScore</span><span class="hljs-params">(<span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&quot;, score=&quot;</span> + score +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>CollectionsTest.java:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">package</span> com.ithema.class3;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collections;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> CollectionsTest &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(String[] args) &#123;<br>        <span class="hljs-comment">//批量往集合中添加数据</span><br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        Collections.addAll(list, <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;E&quot;</span>, <span class="hljs-string">&quot;F&quot;</span>, <span class="hljs-string">&quot;G&quot;</span>);<br>        System.out.<span class="hljs-keyword">println</span>(list);<br><br>        <span class="hljs-comment">//打乱集合的元素顺序</span><br>        Collections.shuffle(list);<br>        System.out.<span class="hljs-keyword">println</span>(list);<br><br><br>        <span class="hljs-comment">//对集合中的数据进行升序排序</span><br>        List&lt;Integer&gt; list1 = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        list1.add(<span class="hljs-number">9</span>);<br>        list1.add(<span class="hljs-number">4</span>);<br>        list1.add(<span class="hljs-number">2</span>);<br>        list1.add(<span class="hljs-number">1</span>);<br>        Collections.<span class="hljs-keyword">sort</span>(list1);<br>        System.out.<span class="hljs-keyword">println</span>(list1);<br><br>        List&lt;Student&gt; list2 = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        list2.add(<span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-number">20</span>,<span class="hljs-number">190.8</span>));<br>        list2.add(<span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-number">22</span>,<span class="hljs-number">189.9</span>));<br>        <span class="hljs-comment">//按照学生类中的年龄升序排序</span><br>        Collections.<span class="hljs-keyword">sort</span>(list2);<br>        System.out.<span class="hljs-keyword">println</span>(list2);<br><br><br>        <span class="hljs-comment">//按照分数排序</span><br>        Collections.<span class="hljs-keyword">sort</span>(list2, <span class="hljs-keyword">new</span> Comparator&lt;Student&gt;() &#123;<br>            @Override<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> compare(Student o1, Student o2) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">Double</span>.compare(o1.getScore(), o2.getScore());<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">//对以上代码进行简化</span><br>        Collections.<span class="hljs-keyword">sort</span>(list2,(o1, o2) -&gt; <span class="hljs-keyword">Double</span>.compare(o1.getScore(), o2.getScore()));<br>        System.out.<span class="hljs-keyword">println</span>(list2);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a69.png" srcset="/img/loading.gif" lazyload><br><strong>注意：score是double型，而compare方法的返回值是int型，所以这里使用的是<code>Double.compare</code>方法，传入两个double型数据，进行排序。</strong></p>
<h2 id="综合案例：斗地主游戏"><a href="#综合案例：斗地主游戏" class="headerlink" title="综合案例：斗地主游戏"></a>综合案例：斗地主游戏</h2><p>业务需求</p>
<ul>
<li>总共54张牌</li>
<li>点数：3、4、5、6、7、8、9、10、J、Q、K、A、2</li>
<li>花色：❤、♣、⭐、❀</li>
<li>大小王：🐱、🐅</li>
<li>点数分别组合四种花色，大小王各一张</li>
<li>斗地主：发出51张牌，剩下3张作为底牌<br>Card.java:</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package com.<span class="hljs-property">ithema</span>.<span class="hljs-property">class3</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Card</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-built_in">number</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> color;<br>    <span class="hljs-keyword">private</span> int size;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Card</span>() &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Card</span>(<span class="hljs-title class_">String</span> <span class="hljs-built_in">number</span>, <span class="hljs-title class_">String</span> color, int size) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span> = <span class="hljs-built_in">number</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = size;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getNumber</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">number</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setNumber</span>(<span class="hljs-params"><span class="hljs-title class_">String</span> <span class="hljs-built_in">number</span></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span> = <span class="hljs-built_in">number</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getColor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> color;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setColor</span>(<span class="hljs-params"><span class="hljs-title class_">String</span> color</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getSize</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> size;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setSize</span>(<span class="hljs-params">int size</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = size;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> color + <span class="hljs-built_in">number</span> ;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Romm.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ithema.class3;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collections;<br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span> &#123;<br>    <span class="hljs-comment">//以恶个房间有一副牌</span><br>    <span class="hljs-keyword">private</span> List&lt;Card&gt; allCard = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Card&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Room</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//做出54张牌，存入到集合中</span><br>        <span class="hljs-comment">//a、点数：个数确定，类型确定</span><br>        String[] number = &#123; <span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;4&quot;</span>, <span class="hljs-string">&quot;5&quot;</span>, <span class="hljs-string">&quot;6&quot;</span>, <span class="hljs-string">&quot;7&quot;</span>, <span class="hljs-string">&quot;8&quot;</span>, <span class="hljs-string">&quot;9&quot;</span>, <span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;J&quot;</span>, <span class="hljs-string">&quot;Q&quot;</span>, <span class="hljs-string">&quot;K&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;2&quot;</span>&#125;;<br>        <span class="hljs-comment">//b、花色，个数确定，类型确定</span><br>        String[] color = &#123;<span class="hljs-string">&quot;❤&quot;</span>, <span class="hljs-string">&quot;♣&quot;</span>, <span class="hljs-string">&quot;⭐&quot;</span>, <span class="hljs-string">&quot;❀&quot;</span>&#125;;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//c、遍历点数、再遍历花色</span><br>        <span class="hljs-keyword">for</span> (String s : number) &#123;<br>            size ++;<br>            <span class="hljs-keyword">for</span> (String c : color) &#123;<br>                <span class="hljs-comment">//得到一张牌</span><br>                <span class="hljs-type">Card</span> <span class="hljs-variable">card</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Card</span>(s, c, size);<br>                allCard.add(card);<span class="hljs-comment">//存入牌</span><br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//存入大小王</span><br>        <span class="hljs-comment">//小王</span><br>        <span class="hljs-type">Card</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Card</span>(<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;🐅&quot;</span>, ++size);<br>        <span class="hljs-type">Card</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Card</span>(<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;🐱&quot;</span>,++size);<br>        Collections.addAll(allCard, c1, c2);<span class="hljs-comment">//批量加入数据</span><br>        System.out.println(<span class="hljs-string">&quot;新牌&quot;</span>+ allCard);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 游戏启动方法</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//1、洗牌：打乱</span><br>        Collections.shuffle(allCard);<br>        System.out.println(<span class="hljs-string">&quot;洗牌后&quot;</span>+allCard);<br><br>        <span class="hljs-comment">//2.发牌，首先肯定要定义三个玩家，List(ArrayList),因为玩家手中的牌可以重复，必须要有索引</span><br>        List&lt;Card&gt; cards1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;Card&gt; cards2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        List&lt;Card&gt; cards3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-comment">//正式发牌给三个玩家，依次发出51张牌，，剩余3张牌</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; allCard.size() - <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-type">Card</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> allCard.get(i);<br>            <span class="hljs-comment">//判断把牌发给谁</span><br>            <span class="hljs-keyword">if</span>(i % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)&#123;<br>                cards1.add(c);<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i % <span class="hljs-number">3</span> == <span class="hljs-number">1</span>)&#123;<br>                cards2.add(c);<br>            &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i % <span class="hljs-number">3</span> == <span class="hljs-number">2</span>)&#123;<br>                cards3.add(c);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">//3、对3个玩家的牌进行排序</span><br>        sortCards(cards1);<br>        sortCards(cards2);<br>        sortCards(cards3);<br><br>        <span class="hljs-comment">//4、看牌</span><br>        System.out.println(<span class="hljs-string">&quot;1&quot;</span>+cards1);<br>        System.out.println(<span class="hljs-string">&quot;2&quot;</span>+cards2);<br>        System.out.println(<span class="hljs-string">&quot;3&quot;</span>+cards3);<br>        List&lt;Card&gt; lastCards = allCard.subList(allCard.size() - <span class="hljs-number">3</span>, allCard.size());<span class="hljs-comment">//从51截取到54，包前不包后</span><br>        System.out.println(<span class="hljs-string">&quot;底牌&quot;</span>+lastCards);<br>        cards1.addAll(lastCards);<span class="hljs-comment">//cards1抢到地主，将底牌分配给他</span><br>        sortCards(cards1);<br>        System.out.println(<span class="hljs-string">&quot;1抢到地主&quot;</span>+cards1);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sortCards</span><span class="hljs-params">(List&lt;Card&gt; cards)</span> &#123;<br>        Collections.sort(cards, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Card&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Card o1, Card o2)</span> &#123;<br>                <span class="hljs-keyword">return</span> o1.getSize()-o2.getSize();<span class="hljs-comment">//升序排序</span><br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>注意：List有一个方法<code>subList(int startindex, int lastindex)</code>可截取集合起始索引到结束索引的元素（包前不包后）</strong></p>
<p>GameDemo.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ithema.class3;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GameDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        - 总共54张牌</span><br><span class="hljs-comment">//                - 点数：3、4、5、6、7、8、9、10、J、Q、K、A、2</span><br><span class="hljs-comment">//                - 花色：❤、♣、⭐、🌼</span><br><span class="hljs-comment">//        - 大小王：🐱、🐅</span><br><span class="hljs-comment">//        - 点数分别组合四种花色，大小王各一张</span><br><span class="hljs-comment">//                - 斗地主：发出51张牌，剩下3张作为底牌</span><br><br>        <span class="hljs-comment">//1.牌类</span><br>        <span class="hljs-comment">//2.房间</span><br>        <span class="hljs-type">Room</span> <span class="hljs-variable">room</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Room</span>();<br>        <span class="hljs-comment">//3.启动游戏</span><br>        room.start();<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a70.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="Map双列集合"><a href="#Map双列集合" class="headerlink" title="Map双列集合"></a>Map双列集合</h1><ul>
<li>Map集合称为双列集合，格式：{key1&#x3D;value1,key2&#x3D;value2,key3&#x3D;value3,…},一次需要存一对数据作为一个元素</li>
<li>每个元素称为键值对（对象），Map集合也称为“键值对集合”</li>
<li>Map所有的key是不能重复的，但值可以重复，键和值是一一对应的</li>
<li><strong>Map系列集合的特点都是由键决定的，值只是一个附属品，值不做要求</strong><ul>
<li>HashMap（由键决定特点）：无序、不重复无索引（用得最多）</li>
<li>LinkedHashMap（由键决定特点）：有序、不重复、无索引</li>
<li>TreeMap（由键决定特点）：按照键大小默认升序排序、不重复、无索引</li>
</ul>
</li>
</ul>
<p><img src="/image/a71.png" srcset="/img/loading.gif" lazyload alt="HashMap"><br><img src="/image/a72.png" srcset="/img/loading.gif" lazyload alt="LinkedHashMap"><br><img src="/image/a73.png" srcset="/img/loading.gif" lazyload alt="TreeMap"><br><strong>注意：TreeMap集合中的键值对不能为空，否则无法排序</strong></p>
<h3 id="Map集合常用方法"><a href="#Map集合常用方法" class="headerlink" title="Map集合常用方法"></a>Map集合常用方法</h3><p>Map的所有子类集合的方法都继承自它，所以我们直接了解它的方法即可。</p>
<ul>
<li><code>public int size()</code>获得集合长度</li>
<li><code>public boolean isEmpty()</code>判断集合是否为空</li>
<li><code>public V get(Object key)</code>获得键位key的值，并返回值</li>
<li><code>public V put(K key, V value)</code>往集合中添加键和值，并返回值</li>
<li><code>public void clear()</code>清空集合</li>
<li><code>public V remove(Object key)</code>删除键为key的元素，返回改键对应的值</li>
<li><code>public void clear()</code>清空集合</li>
<li><code>public boolean containsKey(Object key)</code>判断是否存在键key</li>
<li><code>public boolean containsValue(Object value)</code>判断是否包含值value</li>
<li><code>public Set&lt;K&gt; keySet()</code>获取集合全部键,返回Set集合</li>
<li><code>public Collection&lt;V&gt; values()</code>获取集合全部值,返回Collection集合</li>
<li><code>public void putAll(Map&lt;? extends K,? extends V&gt; m)</code>将一个map中的元素全部复制到另一个map集合中</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.LinkedHashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.TreeMap;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> MapTest &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        Map&lt;<span class="hljs-type">Integer</span>,String&gt; map = <span class="hljs-built_in">new</span> HashMap&lt;&gt;();//按照键升序、不重复、无索引<br>        map.put(<span class="hljs-number">1</span>, &quot;A&quot;);<br>        map.put(<span class="hljs-number">2</span>, &quot;B&quot;);<br>        map.put(<span class="hljs-number">3</span>, &quot;C&quot;);<br>        map.put(<span class="hljs-number">3</span>, &quot;D&quot;);<br>        map.put(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map);<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map.size());<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map.isEmpty());<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map.<span class="hljs-keyword">get</span>(<span class="hljs-number">1</span>));<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map.<span class="hljs-keyword">get</span>(<span class="hljs-number">4</span>));<br><br>        map.remove(<span class="hljs-number">3</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map);<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map.containsKey(<span class="hljs-number">1</span>));<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map.containsValue(&quot;0&quot;));<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map.keySet());<br><br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map.<span class="hljs-keyword">values</span>());<br><br>        Map&lt;<span class="hljs-type">Integer</span>,String&gt; map2 = <span class="hljs-built_in">new</span> HashMap&lt;&gt;();<br>        map2.put(<span class="hljs-number">1</span>, &quot;A&quot;);<br>        map2.put(<span class="hljs-number">2</span>, &quot;B&quot;);<br>        map2.put(<span class="hljs-number">4</span>, &quot;C&quot;);<br>        map.putAll(map2);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map2);<br>        <br>        map.clear();<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a74.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="Map的遍历方式"><a href="#Map的遍历方式" class="headerlink" title="Map的遍历方式"></a>Map的遍历方式</h2><ul>
<li>键找值：先获取键，依据键找值</li>
<li>键值对：将键和值看成整体，采用的方法<code>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()</code>,将每一组键值对封装成一个对象，再得到每组的键和值</li>
<li>Lambda表达式：<code>default void forEach(BiConsumer&lt;? super K,? super V&gt; action)</code></li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">Set</span>;<br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">function</span>.BiConsumer;<br><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> MapTest1 &#123;<br>    <span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br>        Map&lt;String,<span class="hljs-type">Double</span>&gt; map = <span class="hljs-built_in">new</span> HashMap&lt;&gt;();<br>        map.put(&quot;key1&quot;, <span class="hljs-number">23.9</span>);<br>        map.put(&quot;key2&quot;, <span class="hljs-number">27.9</span>);<br>        map.put(&quot;key3&quot;, <span class="hljs-number">30.9</span>);<br>        map.put(&quot;key4&quot;, <span class="hljs-number">40.9</span>);<br>        map.put(&quot;key5&quot;, <span class="hljs-number">50.9</span>);<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(map);<br><br>        //键找值遍历<br>        <span class="hljs-keyword">Set</span>&lt;String&gt; keys = map.keySet();<br>        <span class="hljs-keyword">for</span> (String key : keys) &#123;<br>            <span class="hljs-type">double</span> <span class="hljs-keyword">value</span> = map.<span class="hljs-keyword">get</span>(key);<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(key+&quot;---&gt;&quot;+<span class="hljs-keyword">value</span>);<br>        &#125;<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;=========================&quot;);<br><br>        //键值对遍历<br>        <span class="hljs-keyword">Set</span>&lt;Map.Entry&lt;String, <span class="hljs-type">Double</span>&gt;&gt; entries = map.entrySet();<br>        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, <span class="hljs-type">Double</span>&gt; entry : entries) &#123;<br>            String key = entry.getKey();<br>            <span class="hljs-type">double</span> <span class="hljs-keyword">value</span> = entry.getValue();<br>            <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(key+&quot;---&gt;&quot;+<span class="hljs-keyword">value</span>);<br>        &#125;<br>        <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;==========================&quot;);<br><br>        <br>        <br>        //Lambda<br>        map.<span class="hljs-keyword">forEach</span>(<span class="hljs-built_in">new</span> BiConsumer&lt;String, <span class="hljs-type">Double</span>&gt;() &#123;<br>            @Override<br>            <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(String k, <span class="hljs-type">Double</span> v) &#123;<br>                <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(k+&quot;---&gt;&quot;+v);<br>            &#125;<br>        &#125;);<br>        //以上代码简化<br>        map.<span class="hljs-keyword">forEach</span>((k, v) -&gt; <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(k+&quot;---&gt;&quot;+v));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>注意：快捷键Ctrl+Alt+v可以自动补全变量名称</strong></p>
<p>Map的forEach方法的源码如下，其实就是利用第二种遍历方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">forEach</span>(<span class="hljs-params">BiConsumer&lt;? <span class="hljs-variable language_">super</span> K, ? <span class="hljs-variable language_">super</span> V&gt; action</span>) &#123;<br>    <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">requireNonNull</span>(action);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-title class_">Map</span>.<span class="hljs-property">Entry</span>&lt;K, V&gt; entry : <span class="hljs-title function_">entrySet</span>()) &#123;<br>        K k;<br>        V v;<br>        <span class="hljs-keyword">try</span> &#123;<br>            k = entry.<span class="hljs-title function_">getKey</span>();<br>            v = entry.<span class="hljs-title function_">getValue</span>();<br>        &#125; <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">IllegalStateException</span> ise) &#123;<br>            <span class="hljs-comment">// this usually means the entry is no longer in the map.</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentModificationException</span>(ise);<br>        &#125;<br>        action.<span class="hljs-title function_">accept</span>(k, v);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="Map集合的案例-统计投票人数"><a href="#Map集合的案例-统计投票人数" class="headerlink" title="Map集合的案例-统计投票人数"></a>Map集合的案例-统计投票人数</h2><p>需求：某班级有80名学生，决定取秋游，班长确定了{A、B、C、D}四个经典，现在要统计班上学生对各个经典的投票人数。</p>
<ul>
<li>把80个学生选择的景点数据放到集合中</li>
<li>利用Map统计每个景点的投票人数，（key景点  value次数）</li>
<li>遍历80个景点数据</li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs arduino">package com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapTest3</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br>        <span class="hljs-comment">//1、把80个学生选择的景点数据放到集合中</span><br>        List&lt;<span class="hljs-type">String</span>&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        <span class="hljs-type">String</span>[] selects = &#123;<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>&#125;;<br>        Random r = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Random</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80</span>; i++) &#123;<br>            <span class="hljs-type">int</span> index = r.<span class="hljs-built_in">nextInt</span>(<span class="hljs-number">4</span>);<span class="hljs-comment">//随机获取索引：0 1 2 3</span><br>            list.<span class="hljs-built_in">add</span>(selects[index]);<br>        &#125;<br>        System.out.<span class="hljs-built_in">println</span>(list);<br><br>        <span class="hljs-comment">//2、统计每个景点的投票人数，（景点  次数）</span><br>        Map&lt;<span class="hljs-type">String</span>, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br><br>        <span class="hljs-comment">//3、遍历80个景点数据</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">String</span> s : list) &#123;<br>            <span class="hljs-keyword">if</span>(map.<span class="hljs-built_in">containsKey</span>(s)) &#123;<br>                <span class="hljs-comment">//说明景点之前统计过，次数+1，存到map集合中</span><br>                map.<span class="hljs-built_in">put</span>(s, map.<span class="hljs-built_in">get</span>(s)<span class="hljs-number">+1</span>);<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-comment">//说明景点第一次统计，次数为1，存到map集合中</span><br>                map.<span class="hljs-built_in">put</span>(s, <span class="hljs-number">1</span>);<br>            &#125;<br>        &#125;<br>        System.out.<span class="hljs-built_in">println</span>(map);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a75.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="HashMap的底层原理"><a href="#HashMap的底层原理" class="headerlink" title="HashMap的底层原理"></a>HashMap的底层原理</h2><ul>
<li>与HashSet原理一样，基于哈希表实现，Set集合中的元素只要键不要值，HashSet的源码如下：<br><img src="/image/a76.png" srcset="/img/loading.gif" lazyload><br>其所有原理查看上面HashSet集合的原理，对于集合中相同的自定义的对象（如类对象），HashMap没法实现不重复，也和HashSet一样在类中重写equels和hashCode方法，如下图所示：<br><img src="/image/a77.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<h2 id="LinkedHashMap的底层原理"><a href="#LinkedHashMap的底层原理" class="headerlink" title="LinkedHashMap的底层原理"></a>LinkedHashMap的底层原理</h2><ul>
<li>与LinkedHashSet原理一样，基于哈希表实现，Set集合中的元素只要键不要值，LinkedHashSet的源码如下：<br><img src="/image/a78.png" srcset="/img/loading.gif" lazyload></li>
<li>LinkedHashMap将键和值封装成Entry对象，其余原理查看上面LinkedHashSet集合的原理。</li>
</ul>
<h2 id="TreeMap的底层原理"><a href="#TreeMap的底层原理" class="headerlink" title="TreeMap的底层原理"></a>TreeMap的底层原理</h2><ul>
<li>与TreeMap的原理一样，Set集合中的元素只要键不要值，TreeSet的源码如下：<br><img src="/image/a79.png" srcset="/img/loading.gif" lazyload></li>
<li>对自定义对象的排序，也与TreeMap集合相同，有两种方法，一种使类实现Comparable接口重写CompareTo方法，另一种在测试类中使用有参构造器如下图所示,创建Comparator比较器对象，指定比较规则<br><img src="/image/a80.png" srcset="/img/loading.gif" lazyload></li>
</ul>
<h1 id="集合的嵌套"><a href="#集合的嵌套" class="headerlink" title="集合的嵌套"></a>集合的嵌套</h1><p>需求：键：省；值：省包括的所有市</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">package</span> com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">MapList</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args) &#123;<br>        <span class="hljs-comment">//装所有省和对应的市</span><br>        Map&lt;<span class="hljs-keyword">String</span>, List&lt;<span class="hljs-keyword">String</span>&gt;&gt; cities = <span class="hljs-keyword">new</span><span class="hljs-type"></span> HashMap&lt;&gt;();<br><br>        List&lt;<span class="hljs-keyword">String</span>&gt; cities1 = <span class="hljs-keyword">new</span><span class="hljs-type"></span> ArrayList&lt;&gt;();<br>        Collections.addAll(cities1, <span class="hljs-string">&quot;忻州市&quot;</span>,<span class="hljs-string">&quot;太原市&quot;</span>,<span class="hljs-string">&quot;大同市&quot;</span>);<span class="hljs-comment">//批量添加市</span><br>        cities.put(<span class="hljs-string">&quot;山西省&quot;</span>,cities1);<br><br>        List&lt;<span class="hljs-keyword">String</span>&gt; cities2 = <span class="hljs-keyword">new</span><span class="hljs-type"></span> ArrayList&lt;&gt;();<br>        Collections.addAll(cities2, <span class="hljs-string">&quot;安国市&quot;</span>,<span class="hljs-string">&quot;保定市&quot;</span>,<span class="hljs-string">&quot;张家口市&quot;</span>);<br>        cities.put(<span class="hljs-string">&quot;河北省&quot;</span>,cities2);<br><br>        List&lt;<span class="hljs-keyword">String</span>&gt; cities3 = <span class="hljs-keyword">new</span><span class="hljs-type"></span> ArrayList&lt;&gt;();<br>        Collections.addAll(cities3, <span class="hljs-string">&quot;朝阳区&quot;</span>,<span class="hljs-string">&quot;丰台区&quot;</span>,<span class="hljs-string">&quot;海淀区&quot;</span>);<br>        cities.put(<span class="hljs-string">&quot;北京&quot;</span>,cities3);<br><br>        System.out.println(cities);<br><br>        <span class="hljs-comment">//根据省遍历市</span><br>        System.out.println(cities.<span class="hljs-keyword">get</span>(<span class="hljs-string">&quot;山西省&quot;</span>));<br><br>        List&lt;<span class="hljs-keyword">String</span>&gt; hebei = cities.<span class="hljs-keyword">get</span>(<span class="hljs-string">&quot;河北省&quot;</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">String</span> s : <span class="hljs-type">hebei</span>)&#123;<br>            System.out.println(s);<br>        &#125;<br>        <br>        <span class="hljs-comment">//遍历所有省和市</span><br>        cities.forEach((k,v)-&gt; System.out.println(k+<span class="hljs-string">&quot;--&gt;&quot;</span>+v));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a81.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="JDK8新特性：Stream"><a href="#JDK8新特性：Stream" class="headerlink" title="JDK8新特性：Stream"></a>JDK8新特性：Stream</h1><ul>
<li>Stream也叫Stream流，是JDK8新增的一套API（java.util.stream.*），可以用于操作集合或者数组的数据</li>
<li>Stream流大量地结合了Lambda的语法风格来编程，提供更加强大、简单的方式操作集合或者数组中的数据，代码更简洁，可读性更好</li>
</ul>
<p>需求：把一个集合中所有以“张”开头，且是3个字的元素存储到一个新的集合中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collections;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        Collections.addAll(list,<span class="hljs-string">&quot;张无忌&quot;</span>,<span class="hljs-string">&quot;张思&quot;</span>,<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-string">&quot;张亮亮&quot;</span>,<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-string">&quot;张三&quot;</span>);<br><br>        <span class="hljs-comment">//原始方法</span><br>        List&lt;String&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(String s : list)&#123;<br>            <span class="hljs-keyword">if</span>(s.startsWith(<span class="hljs-string">&quot;张&quot;</span>) &amp;&amp; s.length() == <span class="hljs-number">3</span>)&#123;<br>                list1.add(s);<br>            &#125;<br>        &#125;<br>        System.out.println(list1);<br><br>        <span class="hljs-comment">//正则表达式</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">         * - ^张：固定以“张”开头。</span><br><span class="hljs-comment">         * - [\\u4e00-\\u9fa5]&#123;2&#125;：匹配2个汉字（\\u4e00-\\u9fa5是Unicode汉字范围，Java中需双反斜杠转义）。</span><br><span class="hljs-comment">         * - $：确保字符串结束，避免多余字符。</span><br><span class="hljs-comment">         */</span><br>        List&lt;String&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span>(String s : list)&#123;<br>            <span class="hljs-keyword">if</span>(s.matches(<span class="hljs-string">&quot;^张[\\u4e00-\\u9fa5]&#123;2&#125;$&quot;</span>))&#123;<br>                list2.add(s);<br>            &#125;<br>        &#125;<br>        System.out.println(list2);<br><br>        <span class="hljs-comment">//stream流</span><br>        List&lt;String&gt; list3 = list.stream().filter(s -&gt; s.startsWith(<span class="hljs-string">&quot;张&quot;</span>))<br>                .filter(a -&gt; a.length() == <span class="hljs-number">3</span>).toList();<br>        System.out.println(list3);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a82.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="Stream流的使用步骤"><a href="#Stream流的使用步骤" class="headerlink" title="Stream流的使用步骤"></a>Stream流的使用步骤</h2><ul>
<li>首先先有一个数据源（集合或数组），获取Stream流（代表一条流水线）</li>
<li>调用流水线的各种方法（过滤、排序、去重…）对数据进行处理</li>
<li>获得处理的结果，遍历、统计、收集到一个新集合中返回</li>
</ul>
<h3 id="获取Stream流"><a href="#获取Stream流" class="headerlink" title="获取Stream流"></a>获取Stream流</h3><ul>
<li>获取集合的Stream流<code>default Steam&lt;E&gt; stream()</code></li>
<li>获取数组的Stream流<code>public static &lt;T&gt; Stream&lt;T&gt; stream(T[] array)</code>或者<code>public static&lt;T&gt; Stream&lt;T&gt; of(T...values)</code></li>
</ul>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs arduino">package com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.<span class="hljs-built_in">Stream</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamTest2</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br>        List&lt;<span class="hljs-type">String</span>&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        Collections.<span class="hljs-built_in">addAll</span>(list,<span class="hljs-string">&quot;张无忌&quot;</span>,<span class="hljs-string">&quot;张思&quot;</span>,<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-string">&quot;张亮亮&quot;</span>,<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-string">&quot;张三&quot;</span>);<br>        <span class="hljs-built_in">Stream</span>&lt;<span class="hljs-type">String</span>&gt; stream = list.<span class="hljs-built_in">stream</span>();<br><br>        Set&lt;<span class="hljs-type">String</span>&gt; set = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();<br>        Collections.<span class="hljs-built_in">addAll</span>(set,<span class="hljs-string">&quot;张无忌&quot;</span>,<span class="hljs-string">&quot;张思&quot;</span>,<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-string">&quot;张亮亮&quot;</span>,<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-string">&quot;张三&quot;</span>);<br>        <span class="hljs-built_in">Stream</span>&lt;<span class="hljs-type">String</span>&gt; stream1 = set.<span class="hljs-built_in">stream</span>();<br>        stream<span class="hljs-number">1.f</span>ilter(s -&gt; s.<span class="hljs-built_in">contains</span>(<span class="hljs-string">&quot;张&quot;</span>)).forEach(System.out::println);<br><br><br>        Map&lt;<span class="hljs-type">String</span>, Integer&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        map.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-number">1</span>);<br>        map.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;2&quot;</span>,<span class="hljs-number">2</span>);<br>        map.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;3&quot;</span>,<span class="hljs-number">3</span>);<br>        map.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;4&quot;</span>,<span class="hljs-number">4</span>);<br>        Set&lt;<span class="hljs-type">String</span>&gt; strings = map.<span class="hljs-built_in">keySet</span>();<br>        <span class="hljs-built_in">Stream</span>&lt;<span class="hljs-type">String</span>&gt; stream2 = strings.<span class="hljs-built_in">stream</span>();<br><br>        Collection&lt;Integer&gt; v = map.<span class="hljs-built_in">values</span>();<br>        <span class="hljs-built_in">Stream</span>&lt;Integer&gt; stream3 = v.<span class="hljs-built_in">stream</span>();<br><br>        Set&lt;Map.Entry&lt;<span class="hljs-type">String</span>,Integer&gt;&gt; set2 = map.<span class="hljs-built_in">entrySet</span>();<br>        <span class="hljs-built_in">Stream</span>&lt;Map.Entry&lt;<span class="hljs-type">String</span>,Integer&gt;&gt; kv2 = set<span class="hljs-number">2.</span><span class="hljs-built_in">stream</span>();<br>        kv<span class="hljs-number">2.f</span>ilter(s -&gt; s.<span class="hljs-built_in">getKey</span>().<span class="hljs-built_in">contains</span>(<span class="hljs-string">&quot;1&quot;</span>)).forEach(s -&gt; System.out.<span class="hljs-built_in">println</span>(s.<span class="hljs-built_in">getKey</span>()+<span class="hljs-string">&quot;---&gt;&quot;</span>+s.<span class="hljs-built_in">getValue</span>()));<br><br><br>        <span class="hljs-type">String</span>[] arr = &#123;<span class="hljs-string">&quot;张无忌&quot;</span>,<span class="hljs-string">&quot;张思&quot;</span>,<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-string">&quot;张亮亮&quot;</span>,<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-string">&quot;张三&quot;</span>&#125;;<br>        <span class="hljs-built_in">Stream</span>&lt;<span class="hljs-type">String</span>&gt; stream4 = Arrays.<span class="hljs-built_in">stream</span>(arr);<br>        <span class="hljs-built_in">Stream</span>&lt;<span class="hljs-type">String</span>&gt; arr1 = <span class="hljs-built_in">Stream</span>.<span class="hljs-built_in">of</span>(arr);<br>        <br><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="/image/a83.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="Stream流常见的中间方法"><a href="#Stream流常见的中间方法" class="headerlink" title="Stream流常见的中间方法"></a>Stream流常见的中间方法</h3><ul>
<li><code>Stream&lt;T&gt; filter(Predicate&lt;? super T&gt; predicate)</code>过滤符合条件的数据</li>
<li><code>Stream&lt;T&gt; sorted()</code>默认升序排序</li>
<li><code>Stream&lt;T&gt; sorted(Comparator&lt;? super T&gt; comparator)</code>存在自定义对象的情况下，按照有参构造器中定义的排序规则排序</li>
<li><code>Stream&lt;T&gt; limit(long maxSize)</code>取前面maxSize个数据</li>
<li><code>Stream&lt;T&gt; skip(long n)</code>跳过前面n个数据，取剩余的数据</li>
<li><code>Stream(T) distinct()</code>去除重复的数据</li>
<li><code>&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)</code>映射成其他数据输出</li>
<li><code>static &lt;T&gt; Stream&lt;T&gt; concat(Stream a, Stream b)</code>将两个Stream流合并成一个Stream流</li>
</ul>
<p>Student.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.Objects;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;Student&gt; &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> score;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(Student o)</span> &#123;<span class="hljs-comment">//升序排序</span><br>        <span class="hljs-comment">//this   o</span><br>        <span class="hljs-comment">// 前面大于后面返回正整数</span><br>        <span class="hljs-comment">// 前面小于后面返回负整数</span><br>        <span class="hljs-comment">// 前面等于后面返回0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.age - o.age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, <span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getScore</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> score;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setScore</span><span class="hljs-params">(<span class="hljs-type">double</span> score)</span> &#123;<br>        <span class="hljs-built_in">this</span>.score = score;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&quot;, score=&quot;</span> + score +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> (Student) o;<br>        <span class="hljs-keyword">return</span> age == student.age &amp;&amp; Double.compare(score, student.score) == <span class="hljs-number">0</span> &amp;&amp; Objects.equals(name, student.name);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Objects.hash(name, age, score);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>StreamTest3.java：</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs livescript">package com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Collections;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.stream.Stream;<br><br>public <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamTest3</span> &#123;<br>    public <span class="hljs-keyword">static</span> <span class="hljs-literal">void</span> main(<span class="hljs-built_in">String</span>[] args) &#123;<br>        List&lt;Double&gt; <span class="hljs-keyword">list</span> = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        Collections.addAll(<span class="hljs-keyword">list</span>, <span class="hljs-number">19.0</span>, <span class="hljs-number">222.0</span>, <span class="hljs-number">323.0</span>, <span class="hljs-number">42.4</span>, <span class="hljs-number">511.3</span>, <span class="hljs-number">622.2</span>);<br>        System.out.println(<span class="hljs-string">&quot;==========找出大于等于60的分数并升序排序========&quot;</span>);<br>        <span class="hljs-regexp">//找出大于等于60的分数并升序排序</span><br><span class="hljs-regexp">        list.stream().filter(s -&gt; s &gt;= 60).sorted().forEach(System.out::println);</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">        List&lt;Student&gt; students = new ArrayList&lt;&gt;();</span><br><span class="hljs-regexp">        Student s1 = new Student(&quot;张三&quot;,12,19.9);</span><br><span class="hljs-regexp">        Student s6 = new Student(&quot;张三&quot;,12,19.9);</span><br><span class="hljs-regexp">        Student s2 = new Student(&quot;李四&quot;,22,19.5);</span><br><span class="hljs-regexp">        Student s3 = new Student(&quot;王五&quot;,72,16.6);</span><br><span class="hljs-regexp">        Student s4 = new Student(&quot;孙七&quot;,32,15.9);</span><br><span class="hljs-regexp">        Student s5 = new Student(&quot;赵六&quot;,52,19.44);</span><br><span class="hljs-regexp">        Collections.addAll(students, s1, s2, s3, s4, s5, s6);</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">        System.out.println(&quot;===========找出年龄大于等于23，小于等于70，并降序输出=========&quot;);</span><br><span class="hljs-regexp">        //</span>找出年龄大于等于<span class="hljs-number">23</span>，小于等于<span class="hljs-number">70</span>，并降序输出<br>        students.stream().filter(s -&gt; s.getAge() &gt;= <span class="hljs-number">23</span>).filter(s -&gt; s.getAge() &lt;= <span class="hljs-number">70</span>)<br>                .sorted<span class="hljs-function"><span class="hljs-params">((o1,o2) -&gt; o2.getAge()-o1.getAge())</span>.<span class="hljs-title">forEach</span><span class="hljs-params">(System.out::println)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;============取出分数最高的前三名学生，并输出==========&quot;</span>)</span>;</span><br><span class="hljs-function">        //取出分数最高的前三名学生，并输出</span><br><span class="hljs-function">        <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">sorted</span><span class="hljs-params">((o1,o2) -&gt; Double.compare(o2.getScore(),o1.getScore()))</span></span><br><span class="hljs-function">                .<span class="hljs-title">limit</span><span class="hljs-params">(<span class="hljs-number">3</span>)</span>.<span class="hljs-title">forEach</span><span class="hljs-params">(System.out::println)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;============取出分数倒数的2名学生，并输出==========&quot;</span>)</span>;</span><br><span class="hljs-function">        //取出分数倒数的2名学生，并输出</span><br><span class="hljs-function">        <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">sorted</span><span class="hljs-params">((o1,o2) -&gt; Double.compare(o2.getScore(),o1.getScore()))</span></span><br><span class="hljs-function">                .<span class="hljs-title">skip</span><span class="hljs-params">(students.size()-<span class="hljs-number">2</span>)</span>.<span class="hljs-title">forEach</span><span class="hljs-params">(System.out::println)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;=========请找出分数超过19的的学生的名字，去除重复名字并输出=========&quot;</span>)</span>;</span><br><span class="hljs-function">        //请找出分数超过19的的学生的名字，去除重复名字并输出</span><br><span class="hljs-function">        <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19.0</span>)</span>.<span class="hljs-title">map</span><span class="hljs-params">(s -&gt; s.getName())</span></span><br><span class="hljs-function">                .<span class="hljs-title">distinct</span><span class="hljs-params">()</span>.<span class="hljs-title">forEach</span><span class="hljs-params">(System.out::println)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;==========请找出分数超过19的的学生，去除重复对象并输出==========&quot;</span>)</span>;</span><br><span class="hljs-function">        //请找出分数超过19的的学生，去除重复对象并输出</span><br><span class="hljs-function">        <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19.0</span>)</span></span><br><span class="hljs-function">                .<span class="hljs-title">distinct</span><span class="hljs-params">()</span>.<span class="hljs-title">forEach</span><span class="hljs-params">(System.out::println)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">&quot;============合并两个stream流==========&quot;</span>)</span>;</span><br><span class="hljs-function">        <span class="hljs-title">Stream</span>&lt;<span class="hljs-title">String</span>&gt; <span class="hljs-title">tre1</span> = <span class="hljs-title">Stream</span>.<span class="hljs-title">of</span><span class="hljs-params">(<span class="hljs-string">&quot;222&quot;</span>, <span class="hljs-string">&quot;1111&quot;</span>)</span>;</span><br><span class="hljs-function">        <span class="hljs-title">Stream</span>&lt;<span class="hljs-title">String</span>&gt; <span class="hljs-title">tre2</span> = <span class="hljs-title">Stream</span>.<span class="hljs-title">of</span><span class="hljs-params">(<span class="hljs-string">&quot;444&quot;</span>, <span class="hljs-string">&quot;33333&quot;</span>)</span>;</span><br><span class="hljs-function">        <span class="hljs-title">Stream</span>&lt;<span class="hljs-title">String</span>&gt; <span class="hljs-title">concat</span> = <span class="hljs-title">Stream</span>.<span class="hljs-title">concat</span><span class="hljs-params">(tre1, tre2)</span>;</span><br><span class="hljs-function">        <span class="hljs-title">concat</span>.<span class="hljs-title">forEach</span><span class="hljs-params">(System.out::println)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">    &#125;</span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure>
<p><img src="/image/a84.png" srcset="/img/loading.gif" lazyload><img src="/image/a85.png" srcset="/img/loading.gif" lazyload><br><strong>注意：要去掉重复的整个对象，要重写Equels方法和hashCode方法，确保内容相同的情况下哈希值也相同这样才能够删除。</strong></p>
<h3 id="Stream流常用的终结方法"><a href="#Stream流常用的终结方法" class="headerlink" title="Stream流常用的终结方法"></a>Stream流常用的终结方法</h3><p>终结方法指调用完成后，不会返回新Stream了，无法再使用流</p>
<ul>
<li><code>void forEach(Customer action)</code>遍历对象</li>
<li><code>long count()</code>统计数量</li>
<li><code>Optional&lt;T&gt; max(Comparator&lt;? super T&gt; comparator)</code>找出最大的对象</li>
<li><code>Optional&lt;T&gt; min(Comparator&lt;? super T&gt; comparator)</code>找出最小的对象</li>
<li><strong>收集Stream流</strong>：把Stream流操作后的结果转回到集合或数组中返回。<ul>
<li><code>R collect(Collector collector)</code></li>
<li><code>Object[] toArray()</code></li>
</ul>
</li>
</ul>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs livescript">package com.ithema.class4;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.<span class="hljs-keyword">function</span>.IntFunction;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><br>public <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamTest4</span> &#123;<br>    public <span class="hljs-keyword">static</span> <span class="hljs-literal">void</span> main(<span class="hljs-built_in">String</span>[] args) &#123;<br>        List&lt;Student&gt; students = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        Student s1 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-number">12</span>,<span class="hljs-number">19.9</span>);<br>        Student s6 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;张三&quot;</span>,<span class="hljs-number">12</span>,<span class="hljs-number">19.9</span>);<br>        Student s2 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;李四&quot;</span>,<span class="hljs-number">22</span>,<span class="hljs-number">19.5</span>);<br>        Student s3 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;王五&quot;</span>,<span class="hljs-number">72</span>,<span class="hljs-number">16.6</span>);<br>        Student s4 = <span class="hljs-keyword">new</span> Student(<span class="hljs-string">&quot;孙七&quot;</span>,<span class="hljs-number">32</span>,<span class="hljs-number">15.9</span>);<br>        Collections.addAll(students, s1, s2, s3, s4, s6);<br><br>        <br>        <span class="hljs-regexp">//请计算出分数超过19的学生人数</span><br><span class="hljs-regexp">        long size = students.stream().filter(s -&gt; s.getScore() &gt; 19).count();</span><br><span class="hljs-regexp">        System.out.println(size);</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">        </span><br><span class="hljs-regexp">        //</span>找出分数最高的学生<br>        Student s12 = students.stream<span class="hljs-function"><span class="hljs-params">()</span>.<span class="hljs-title">max</span><span class="hljs-params">((o1,o2)-&gt;Double.compare(o1.getScore(),o2.getScore()))</span>.<span class="hljs-title">get</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(s12)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        </span><br><span class="hljs-function">        //找出分数最低的学生</span><br><span class="hljs-function">        <span class="hljs-title">Student</span> <span class="hljs-title">s11</span> = <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">min</span><span class="hljs-params">((o1,o2)-&gt;Double.compare(o1.getScore(),o2.getScore()))</span>.<span class="hljs-title">get</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(s11)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        </span><br><span class="hljs-function">        //找出分数超过19的学生，并放到<span class="hljs-title">List</span>集合中</span><br><span class="hljs-function">        <span class="hljs-title">List</span>&lt;<span class="hljs-title">Student</span>&gt; <span class="hljs-title">collect</span> = <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19</span>)</span>.<span class="hljs-title">collect</span><span class="hljs-params">(Collectors.toList())</span>;</span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(collect)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        </span><br><span class="hljs-function">        //找出分数超过19的学生，并放到<span class="hljs-title">Set</span>集合中</span><br><span class="hljs-function">        <span class="hljs-title">Set</span>&lt;<span class="hljs-title">Student</span>&gt; <span class="hljs-title">Set</span> = <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19</span>)</span>.<span class="hljs-title">collect</span><span class="hljs-params">(Collectors.toSet())</span>;</span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-built_in">Set</span>)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        </span><br><span class="hljs-function">        //找出分数大于19的学生，并把学生对象的名字和身高存到一个<span class="hljs-title">Map</span>集合中返回</span><br><span class="hljs-function">//        <span class="hljs-title">Map</span>&lt;<span class="hljs-title">String</span>, <span class="hljs-title">Double</span>&gt; <span class="hljs-title">Map</span> = <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19</span>)</span></span><br><span class="hljs-function">//                .<span class="hljs-title">distinct</span><span class="hljs-params">()</span>.<span class="hljs-title">collect</span><span class="hljs-params">(Collectors.toMap(a -&gt; a.getName(), a -&gt; a.getScore()))</span>;</span><br><span class="hljs-function">        //简化</span><br><span class="hljs-function">        <span class="hljs-title">Map</span>&lt;<span class="hljs-title">String</span>, <span class="hljs-title">Double</span>&gt; <span class="hljs-title">Map</span> = <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19</span>)</span></span><br><span class="hljs-function">                .<span class="hljs-title">distinct</span><span class="hljs-params">()</span>.<span class="hljs-title">collect</span><span class="hljs-params">(Collectors.toMap(Student::getName, Student::getScore))</span>;</span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-built_in">Map</span>)</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        </span><br><span class="hljs-function">        </span><br><span class="hljs-function">        //找出分数大于19的学生，并把学生对象的名字和身高存到一个数组中返回</span><br><span class="hljs-function">        //<span class="hljs-title">Object</span>[] <span class="hljs-title">array</span> = <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19</span>)</span>.<span class="hljs-title">toArray</span><span class="hljs-params">()</span>;</span><br><span class="hljs-function"></span><br><span class="hljs-function">        //<span class="hljs-title">Student</span>[] <span class="hljs-title">array</span> = <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19</span>)</span>.<span class="hljs-title">toArray</span><span class="hljs-params">(len -&gt; <span class="hljs-keyword">new</span> Student[len])</span>;</span><br><span class="hljs-function">        简化</span><br><span class="hljs-function">        <span class="hljs-title">Student</span>[] <span class="hljs-title">array</span> = <span class="hljs-title">students</span>.<span class="hljs-title">stream</span><span class="hljs-params">()</span>.<span class="hljs-title">filter</span><span class="hljs-params">(s -&gt; s.getScore() &gt; <span class="hljs-number">19</span>)</span>.<span class="hljs-title">toArray</span><span class="hljs-params">(Student[]::<span class="hljs-keyword">new</span>)</span>;</span><br><span class="hljs-function">        <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(Arrays.toString(array))</span>;</span><br><span class="hljs-function">        <span class="hljs-title">Student</span>[] <span class="hljs-title">students1</span> = <span class="hljs-title">new</span> <span class="hljs-title">Student</span>[3];</span><br><span class="hljs-function"></span><br><span class="hljs-function">    &#125;</span><br><span class="hljs-function">&#125;</span><br></code></pre></td></tr></table></figure>
<p><img src="/image/a86.png" srcset="/img/loading.gif" lazyload><br><strong>注意：max()和min()方法返回的是一个对应类型的Optional容器，应该使用get()方法将它转化成对应类型</strong>  </p>
<p><strong>转化数组的方法最终类型为Object，若想要转换成对应类型，需要使用有参构造器IntFunction&lt;Student[]&gt;()，简化后为以上代码所示</strong></p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs smali">Student[]<span class="hljs-built_in"> array </span>= students.stream().filter(s -&gt; s.getScore() &gt; 19).toArray(new IntFunction&lt;Student[]&gt;() &#123;<br>            @Override<br>           <span class="hljs-keyword"> public</span> Student[] apply(int value) &#123;<br>               <span class="hljs-built_in"> return </span>new Student[value];<br>            &#125;<br>        &#125;);<br></code></pre></td></tr></table></figure>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java/" class="print-no-link">#Java</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Java集合进阶与Stream</div>
      <div>https://github.com/Alder-djr/Alder-djr.github.io.git/2025/05/20/Java basis/java28/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>May 20, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/05/24/Java%20basis/java29/" title="Java考题">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Java考题</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/05/19/Java%20basis/java27/" title="Java异常">
                        <span class="hidden-mobile">Java异常</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
